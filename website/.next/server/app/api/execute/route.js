"use strict";(()=>{var e={};e.id=972,e.ids=[972],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5315:e=>{e.exports=require("path")},5795:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>A,patchFetch:()=>S,requestAsyncStorage:()=>I,routeModule:()=>v,serverHooks:()=>O,staticGenerationAsyncStorage:()=>x});var r,i={};s.r(i),s.d(i,{POST:()=>T});var n=s(9303),a=s(8716),o=s(670);let c=require("fs");var l=s(5315);!function(e){e.LET="LET",e.CONST="CONST",e.FUNC="FUNC",e.MAKE="MAKE",e.SAY="SAY",e.IF="IF",e.ELSE="ELSE",e.WHILE="WHILE",e.LOOP="LOOP",e.FOR="FOR",e.IN="IN",e.MATCH="MATCH",e.RETURN="RETURN",e.STRUCT="STRUCT",e.ENUM="ENUM",e.IMPORT="IMPORT",e.FROM="FROM",e.ASYNC="ASYNC",e.AWAIT="AWAIT",e.SPAWN="SPAWN",e.BREAK="BREAK",e.TYPE_INT="TYPE_INT",e.TYPE_FLOAT="TYPE_FLOAT",e.TYPE_BOOL="TYPE_BOOL",e.TYPE_STRING="TYPE_STRING",e.TYPE_VOID="TYPE_VOID",e.IDENTIFIER="IDENTIFIER",e.NUMBER="NUMBER",e.STRING="STRING",e.ASSIGN="ASSIGN",e.ARROW="ARROW",e.COLON="COLON",e.DOT="DOT",e.DOUBLE_COLON="DOUBLE_COLON",e.DOT_DOT="DOT_DOT",e.ELLIPSIS="ELLIPSIS",e.PIPE="PIPE",e.PIPE_OP="PIPE_OP",e.LPAREN="LPAREN",e.RPAREN="RPAREN",e.LBRACE="LBRACE",e.RBRACE="RBRACE",e.LBRACKET="LBRACKET",e.RBRACKET="RBRACKET",e.COMMA="COMMA",e.SEMICOLON="SEMICOLON",e.PLUS="PLUS",e.MINUS="MINUS",e.MULTIPLY="MULTIPLY",e.DIVIDE="DIVIDE",e.GT="GT",e.LT="LT",e.BY="BY",e.EOF="EOF"}(r||(r={}));class u{constructor(e){this.position=0,this.line=1,this.column=1,this.source=e}tokenize(){let e=[];for(;this.position<this.source.length;){let t=this.current();if(this.isWhitespace(t)){this.advance();continue}if(this.isAlpha(t)){e.push(this.readIdentifier());continue}if(this.isDigit(t)){e.push(this.readNumber());continue}if('"'===t){e.push(this.readString());continue}if("="===t&&">"===this.peek()){e.push(this.createToken("ARROW","=>")),this.advance(2);continue}if(":"===t&&":"===this.peek()){e.push(this.createToken("DOUBLE_COLON","::")),this.advance(2);continue}if("-"===t&&">"===this.peek()){e.push(this.createToken("ARROW","->")),e.push(this.createToken("ARROW","->")),this.advance(2);continue}if("/"===t&&"/"===this.peek()||"#"===t){this.skipComment();continue}switch(t){case"(":e.push(this.createToken("LPAREN","("));break;case")":e.push(this.createToken("RPAREN",")"));break;case"=":">"===this.peek()?(this.advance(),e.push(this.createToken("ARROW","=>"))):e.push(this.createToken("ASSIGN","="));break;case"|":">"===this.peek()?(this.advance(),e.push(this.createToken("PIPE_OP","|>"))):e.push(this.createToken("PIPE","|"));break;case".":"."===this.peek()?(this.advance(),"."===this.peek()?(this.advance(),e.push(this.createToken("ELLIPSIS","..."))):e.push(this.createToken("DOT_DOT",".."))):e.push(this.createToken("DOT","."));break;case":":":"===this.peek()?(this.advance(),e.push(this.createToken("DOUBLE_COLON","::"))):e.push(this.createToken("COLON",":"));break;case"{":e.push(this.createToken("LBRACE","{"));break;case"}":e.push(this.createToken("RBRACE","}"));break;case"[":e.push(this.createToken("LBRACKET","["));break;case"]":e.push(this.createToken("RBRACKET","]"));break;case",":e.push(this.createToken("COMMA",","));break;case";":e.push(this.createToken("SEMICOLON",";"));break;case"+":e.push(this.createToken("PLUS","+"));break;case"-":e.push(this.createToken("MINUS","-"));break;case"*":e.push(this.createToken("MULTIPLY","*"));break;case"/":e.push(this.createToken("DIVIDE","/"));break;case">":e.push(this.createToken("GT",">"));break;case"<":e.push(this.createToken("LT","<"));break;default:console.warn(`Unexpected character: ${t} at ${this.line}:${this.column}`)}this.advance()}return e.push(this.createToken("EOF","")),e}current(){return this.source[this.position]}peek(){return this.position+1>=this.source.length?"":this.source[this.position+1]}advance(e=1){for(let t=0;t<e&&!(this.position>=this.source.length);t++)"\n"===this.current()?(this.line++,this.column=1):this.column++,this.position++}createToken(e,t){return{type:e,value:t,line:this.line,column:this.column}}isWhitespace(e){return/\s/.test(e)}isAlpha(e){return/[a-zA-Z_]/.test(e)}isDigit(e){return/[0-9]/.test(e)}readIdentifier(){let e=this.line,t=this.column,s="";for(;this.position<this.source.length&&(this.isAlpha(this.current())||this.isDigit(this.current()));)s+=this.current(),this.advance();return{type:this.getKeywordType(s)||"IDENTIFIER",value:s,line:e,column:t}}getKeywordType(e){switch(e){case"let":case"l":return"LET";case"const":return"CONST";case"fn":case"func":case"f":return"FUNC";case"make":return"MAKE";case"say":case"p":case"print":return"SAY";case"if":return"IF";case"else":case"e":return"ELSE";case"while":return"WHILE";case"loop":return"LOOP";case"for":return"FOR";case"in":return"IN";case"break":return"BREAK";case"by":return"BY";case"match":case"m":return"MATCH";case"return":case"ret":return"RETURN";case"struct":return"STRUCT";case"enum":return"ENUM";case"import":return"IMPORT";case"from":return"FROM";case"async":return"ASYNC";case"await":return"AWAIT";case"spawn":return"SPAWN";case"Int":return"TYPE_INT";case"Float":return"TYPE_FLOAT";case"Bool":return"TYPE_BOOL";case"String":return"TYPE_STRING";case"Void":return"TYPE_VOID";default:return}}readNumber(){let e=this.line,t=this.column,s="";for(;this.position<this.source.length&&this.isDigit(this.current());)s+=this.current(),this.advance();if("."===this.current()&&this.isDigit(this.peek()))for(s+=".",this.advance();this.position<this.source.length&&this.isDigit(this.current());)s+=this.current(),this.advance();return{type:"NUMBER",value:s,line:e,column:t}}readString(){let e=this.line,t=this.column;this.advance();let s="";for(;this.position<this.source.length&&'"'!==this.current();)s+=this.current(),this.advance();return this.advance(),{type:"STRING",value:s,line:e,column:t}}skipComment(){for(;this.position<this.source.length&&"\n"!==this.current();)this.advance()}}class h{parse(e,t="unknown"){let s=new u(e);this.tokens=s.tokenize(),this.position=0,this.errors=[],this.errors=[];let i={type:"Program",body:[],location:{line:1,column:1}};for(;this.current().type!==r.EOF;)try{let e=this.parseStatement();e&&i.body.push(e)}catch(e){this.errors.push({message:e.message,line:this.current().line,column:this.current().column,severity:"error"}),this.synchronize()}return{ast:i,errors:this.errors}}parseStatement(){let e=this.current();return e.type===r.LET?this.parseVariableDeclaration():e.type===r.FUNC||e.type===r.MAKE?this.parseFunctionDeclaration():e.type===r.SAY?this.parseSayStatement():e.type===r.IF?this.parseIfStatement():e.type===r.LBRACE?this.parseBlock():e.type===r.RETURN?this.parseReturnStatement():this.parseExpressionStatement()}parseVariableDeclaration(){let e;let t=this.consume(r.LET);if(this.match(r.LBRACE)){let s=[];if(this.current().type!==r.RBRACE)do{let e=this.consume(r.IDENTIFIER,"Expected property name").value,t=e;this.match(r.COLON)&&(t=this.consume(r.IDENTIFIER,"Expected variable name").value),s.push({key:e,value:t})}while(this.match(r.COMMA));this.consume(r.RBRACE,"Expected '}'"),e={type:"ObjectPattern",properties:s,location:t}}else if(this.match(r.LBRACKET)){let s=[];if(this.current().type!==r.RBRACKET)do s.push(this.consume(r.IDENTIFIER,"Expected variable name").value);while(this.match(r.COMMA));this.consume(r.RBRACKET,"Expected ']'"),e={type:"ArrayPattern",elements:s,location:t}}else e={type:"Identifier",name:this.consume(r.IDENTIFIER,"Expected variable name").value,location:t};this.consume(r.ASSIGN,"Expected '=' after variable declaration");let s=this.parseExpression();return this.current().type===r.SEMICOLON&&this.advance(),{type:"VariableDeclaration",pattern:e,value:s,location:{line:t.line,column:t.column}}}parseReturnStatement(){let e;let t=this.consume(r.RETURN);return this.current().type!==r.SEMICOLON&&this.current().type!==r.RBRACE&&(e=this.parseExpression()),this.match(r.SEMICOLON),{type:"ReturnStatement",argument:e,location:t}}parseFunctionDeclaration(){let e;let t=this.advance(),s=this.consume(r.IDENTIFIER,"Expected function name").value;this.consume(r.LPAREN,"Expected '(' after function name");let i=[];if(this.current().type!==r.RPAREN)do i.push(this.consume(r.IDENTIFIER,"Expected parameter name").value);while(this.match(r.COMMA));if(this.consume(r.RPAREN,"Expected ')' after parameters"),this.match(r.ARROW)){let s=this.parseExpression();e={type:"BlockStatement",location:{line:t.line,column:t.column},body:[{type:"ExpressionStatement",expression:s,location:s.location}]}}else e=this.parseBlock();return{type:"FunctionDeclaration",name:s,params:i,body:e,location:{line:t.line,column:t.column}}}parseSayStatement(){let e=this.consume(r.SAY),t=this.parseExpression();return this.current().type===r.SEMICOLON&&this.advance(),{type:"SayStatement",argument:t,location:{line:e.line,column:e.column}}}parseIfStatement(){let e;let t=this.consume(r.IF),s=this.parseExpression(),i=this.parseBlock();return this.match(r.ELSE)&&(e=this.current().type===r.IF?{type:"BlockStatement",location:this.current(),body:[this.parseIfStatement()]}:this.parseBlock()),{type:"IfStatement",test:s,consequent:i,alternate:e,location:{line:t.line,column:t.column}}}parseBlock(){let e=this.consume(r.LBRACE,"Expected '{'"),t=[];for(;this.current().type!==r.RBRACE&&this.current().type!==r.EOF;){let e=this.parseStatement();e&&t.push(e)}return this.consume(r.RBRACE,"Expected '}'"),{type:"BlockStatement",body:t,location:{line:e.line,column:e.column}}}parseExpressionStatement(){let e=this.parseExpression();return this.current().type===r.SEMICOLON&&this.advance(),{type:"ExpressionStatement",expression:e,location:e.location}}parseExpression(){return this.parseBinaryExpression(0)}getPrecedence(e){switch(e){case r.PIPE_OP:return 1;case r.LT:case r.GT:return 2;case r.PLUS:case r.MINUS:return 3;case r.MULTIPLY:case r.DIVIDE:return 4;case r.DOT_DOT:return 5;default:return -1}}parseBinaryExpression(e){let t=this.parsePrimary();for(;;){let s=this.current(),i=this.getPrecedence(s.type);if(i<e)break;if(this.advance(),s.type===r.DOT_DOT){let e;let s=this.parseBinaryExpression(i+1);this.match(r.BY)&&(e=this.parseExpression()),t={type:"RangeExpression",start:t,end:s,step:e,location:t.location};continue}if(s.type===r.PIPE_OP){t={type:"PipelineExpression",left:t,right:this.parseBinaryExpression(i+1),location:t.location};continue}let n=this.parseBinaryExpression(i+1);t={type:"BinaryExpression",operator:s.value,left:t,right:n,location:t.location}}return t}parsePrimary(){let e=this.current();if(e.type===r.NUMBER)return this.advance(),{type:"Literal",value:Number(e.value),raw:e.value,location:e};if(e.type===r.STRING)return this.advance(),{type:"Literal",value:e.value,raw:e.value,location:e};if(e.type===r.IDENTIFIER)return(this.advance(),this.current().type===r.LPAREN)?this.finishCall({type:"Identifier",name:e.value,location:e}):{type:"Identifier",name:e.value,location:e};if(e.type===r.LBRACKET)return this.parseArrayOrComprehension();if(e.type===r.LBRACE)return this.parseObjectLiteral();if(e.type===r.LPAREN){this.advance();let e=this.parseExpression();return this.consume(r.RPAREN,"Expected ')'"),e}if(e.type===r.FUNC)return this.parseFunctionExpression();throw Error(`Unexpected token: ${e.type} (${e.value})`)}parseArrayOrComprehension(){let e=this.consume(r.LBRACKET);if(this.match(r.RBRACKET))return{type:"ArrayLiteral",elements:[],location:e};let t=this.parseExpression();if(this.match(r.PIPE)){let s;let i=this.consume(r.IDENTIFIER,"Expected identifier after '|' in comprehension").value;this.consume(r.IN,"Expected 'in' keyword");let n=this.parseExpression();return this.match(r.COMMA)&&(s=this.parseExpression()),this.consume(r.RBRACKET,"Expected ']'"),{type:"ListComprehension",expression:t,element:i,source:n,filter:s,location:e}}let s=[t];for(;this.match(r.COMMA)&&this.current().type!==r.RBRACKET;)s.push(this.parseExpression());return this.consume(r.RBRACKET,"Expected ']'"),{type:"ArrayLiteral",elements:s,location:e}}parseObjectLiteral(){let e=this.consume(r.LBRACE),t=[];if(this.current().type!==r.RBRACE)do{let e=this.consume(r.IDENTIFIER,"Expected property name").value;this.consume(r.COLON,"Expected ':'");let s=this.parseExpression();t.push({key:e,value:s})}while(this.match(r.COMMA));return this.consume(r.RBRACE,"Expected '}'"),{type:"ObjectLiteral",properties:t,location:e}}parseFunctionExpression(){let e,t;let s=this.consume(r.FUNC);this.current().type===r.IDENTIFIER&&(e=this.consume(r.IDENTIFIER).value),this.consume(r.LPAREN,"Expected '('");let i=[];if(this.current().type!==r.RPAREN)do i.push(this.consume(r.IDENTIFIER,"Expected parameter name").value);while(this.match(r.COMMA));if(this.consume(r.RPAREN,"Expected ')'"),this.match(r.ARROW)){let e=this.parseExpression();t={type:"BlockStatement",location:e.location,body:[{type:"ExpressionStatement",expression:e,location:e.location}]}}else t=this.parseBlock();return{type:"FunctionExpression",name:e,params:i,body:t,location:s}}finishCall(e){this.consume(r.LPAREN);let t=[];if(this.current().type!==r.RPAREN)do t.push(this.parseExpression());while(this.match(r.COMMA));return this.consume(r.RPAREN),{type:"CallExpression",callee:e,arguments:t,location:e.location}}current(){return this.tokens[this.position]}advance(){return this.position<this.tokens.length-1&&this.position++,this.tokens[this.position-1]}consume(e,t){if(this.current().type===e)return this.position++,this.tokens[this.position-1];throw Error(t||`Expected ${e} but got ${this.current().type}`)}match(e){return this.current().type===e&&(this.advance(),!0)}synchronize(){for(this.advance();this.current().type!==r.EOF;){if(this.current().type===r.SEMICOLON)return;switch(this.current().type){case r.LET:case r.FUNC:case r.IF:case r.WHILE:case r.RETURN:return}this.advance()}}constructor(){this.tokens=[],this.position=0,this.errors=[]}}class p{constructor(e){this.values=new Map,this.parent=e}define(e,t){this.values.set(e,t)}get(e){if(this.values.has(e))return this.values.get(e);if(this.parent)return this.parent.get(e);throw Error(`Undefined variable '${e}'`)}assign(e,t){if(this.values.has(e)){this.values.set(e,t);return}if(this.parent){this.parent.assign(e,t);return}throw Error(`Undefined variable '${e}'`)}}class E extends Error{constructor(e){super("Return"),this.value=e}}class m{constructor(){this.globalEnv=new p,this.output=[]}evaluate(e){return this.output=[],this.executeBlock(e.body,this.globalEnv),this.output}executeBlock(e,t){let s=null;for(let r of e)s=this.execute(r,t);return s}execute(e,t){switch(e.type){case"VariableDeclaration":return this.visitVariableDeclaration(e,t);case"FunctionDeclaration":return this.visitFunctionDeclaration(e,t);case"SayStatement":return this.visitSayStatement(e,t);case"IfStatement":return this.visitIfStatement(e,t);case"ExpressionStatement":return this.visitExpression(e,t);case"BlockStatement":return this.visitBlockStatement(e,t);case"ReturnStatement":{let s=null;throw e.argument&&(s=this.evaluateExpression(e.argument,t)),new E(s)}default:throw Error(`Unknown statement type: ${e.type}`)}}visitVariableDeclaration(e,t){let s=this.evaluateExpression(e.value,t);if("Identifier"===e.pattern.type)t.define(e.pattern.name,s);else if("ObjectPattern"===e.pattern.type){if("object"!=typeof s||null===s)throw Error("Destructuring error: value is not an object");for(let r of e.pattern.properties)t.define(r.value,s[r.key])}else if("ArrayPattern"===e.pattern.type){if(!Array.isArray(s))throw Error("Destructuring error: value is not an array");for(let r=0;r<e.pattern.elements.length;r++){let i=e.pattern.elements[r];r<s.length?t.define(i,s[r]):t.define(i,void 0)}}else throw Error(`Unsupported variable declaration pattern type: ${e.pattern.type}`);return s}visitFunctionDeclaration(e,t){t.define(e.name,{type:"function",declaration:e,closure:t})}visitSayStatement(e,t){let s=this.evaluateExpression(e.argument,t);console.log(s),this.output.push(String(s))}visitIfStatement(e,t){let s=this.evaluateExpression(e.test,t);return this.isTruthy(s)?this.execute(e.consequent,t):e.alternate?this.execute(e.alternate,t):void 0}visitBlockStatement(e,t){let s=new p(t);return this.executeBlock(e.body,s)}visitExpression(e,t){return this.evaluateExpression(e.expression,t)}evaluateExpression(e,t){switch(e.type){case"Literal":return e.value;case"Identifier":return t.get(e.name);case"BinaryExpression":return this.visitBinaryExpression(e,t);case"CallExpression":return this.visitCallExpression(e,t);case"PipelineExpression":{let s=this.evaluateExpression(e.left,t);if("Identifier"===e.right.type){let r=t.get(e.right.name);if(r&&"function"===r.type){let e=r.declaration;if(1!==e.params.length)throw Error(`Function ${e.name} in pipeline expects 1 argument but got ${e.params.length}`);let t=new p(r.closure);t.define(e.params[0],s);try{return this.executeBlock(e.body.body,t)}catch(e){if(e instanceof E)return e.value;throw e}}else throw Error(`'${e.right.name}' is not a function and cannot be used in a pipeline.`)}throw Error("Pipeline right side must be a function identifier")}case"RangeExpression":{let s=this.evaluateExpression(e.start,t),r=this.evaluateExpression(e.end,t),i=e.step?this.evaluateExpression(e.step,t):1,n=[];if(i>0)for(let e=s;e<=r;e+=i)n.push(e);else if(i<0)for(let e=s;e>=r;e+=i)n.push(e);else throw Error("Range step cannot be zero.");return n}case"ArrayLiteral":return e.elements.map(e=>this.evaluateExpression(e,t));case"ObjectLiteral":{let s={};for(let r of e.properties)s[r.key]=this.evaluateExpression(r.value,t);return s}case"ListComprehension":{let s=this.evaluateExpression(e.source,t);if(!Array.isArray(s))throw Error("Comprehension source must be an array");let r=[],i=new p(t);for(let t of s){i.define(e.element,t);let s=!0;e.filter&&(s=this.evaluateExpression(e.filter,i)),s&&r.push(this.evaluateExpression(e.expression,i))}return r}case"FunctionExpression":return{type:"function",declaration:e,closure:t};default:throw Error(`Unknown expression type: ${e.type}`)}}visitBinaryExpression(e,t){let s=this.evaluateExpression(e.left,t),r=this.evaluateExpression(e.right,t);switch(e.operator){case"+":return s+r;case"-":return s-r;case"*":return s*r;case"/":return s/r;case">":return s>r;case"<":return s<r;default:throw Error(`Unknown operator: ${e.operator}`)}}visitCallExpression(e,t){let s=t.get(e.callee.name);if(s&&"function"===s.type){let r=s.declaration,i=e.arguments.map(e=>this.evaluateExpression(e,t));if(i.length!==r.params.length)throw Error(`Function ${r.name} expects ${r.params.length} arguments but got ${i.length}`);let n=new p(s.closure);for(let e=0;e<r.params.length;e++)n.define(r.params[e],i[e]);try{return this.executeBlock(r.body.body,n)}catch(e){if(e instanceof E)return e.value;throw e}}throw Error(`'${e.callee.name}' is not a function`)}isTruthy(e){return!!e}}class y{analyze(e,t,s){let r=[];return e.errors.forEach(e=>{r.push({type:"error"===e.severity?"error":"warning",message:e.message,file:s,line:e.line,column:e.column,rule:"syntax"})}),t.split("\n").forEach((e,t)=>{let i=t+1,n=e.trim();n.includes("unsafe")&&r.push({type:"warning",message:"Unsafe block detected - ensure this is necessary",file:s,line:i,column:n.indexOf("unsafe")+1,rule:"safety.unsafe-block"}),(n.includes("TODO")||n.includes("FIXME"))&&r.push({type:"info",message:"TODO comment found",file:s,line:i,column:1,rule:"quality.todo"}),e.length>100&&r.push({type:"info",message:"Line exceeds 100 characters",file:s,line:i,column:100,rule:"style.line-length"})}),{diagnostics:r,metrics:this.calculateMetrics(e.ast,t)}}calculateMetrics(e,t){let s=t.split("\n"),r=s.filter(e=>e.trim()&&!e.trim().startsWith("//")).length,i=s.filter(e=>e.trim().startsWith("//")).length,n=e.body?.filter(e=>"FunctionDeclaration"===e.type).length||0,a=e.body?.filter(e=>"TypeDeclaration"===e.type).length||0;return{totalLines:s.length,codeLines:r,commentLines:i,functions:n,types:a,complexity:Math.floor(r/10)+2*n}}}class d{analyze(e,t,s){let r=[];t.split("\n").forEach((e,t)=>{let i=t+1,n=e.trim();(n.includes("*mut ")||n.includes("*const "))&&r.push({severity:"high",category:"memory-safety",message:"Raw pointer usage detected",file:s,line:i,recommendation:"Use safe references or Box<T> instead of raw pointers"}),n.includes("unsafe")&&(n.includes("thread")||n.includes("spawn"))&&r.push({severity:"critical",category:"concurrency",message:"Unsafe concurrent operation",file:s,line:i,recommendation:"Use safe concurrency primitives from std.async"}),(n.includes("exec(")||n.includes("eval("))&&r.push({severity:"critical",category:"injection",message:"Potential code injection risk",file:s,line:i,recommendation:"Avoid dynamic code execution"}),n.match(/password\s*=\s*["']|api_key\s*=\s*["']|secret\s*=\s*["']/i)&&r.push({severity:"high",category:"secrets",message:"Potential hardcoded secret detected",file:s,line:i,recommendation:"Use environment variables or secure vault"})});let i=r.filter(e=>"critical"===e.severity).length,n=r.filter(e=>"high"===e.severity).length,a=r.filter(e=>"medium"===e.severity).length;return{issues:r,score:Math.max(0,100-(25*i+10*n+5*a))}}}class f{constructor(e){this.reportsDir=l.join(e,".uplim","reports"),this.ensureDirectoryExists()}ensureDirectoryExists(){c.existsSync(this.reportsDir)||c.mkdirSync(this.reportsDir,{recursive:!0})}saveReport(e){let t=new Date().toISOString().replace(/[:.]/g,"-"),s=`report-${t}.json`,r=l.join(this.reportsDir,s);c.writeFileSync(r,JSON.stringify(e,null,2));let i=l.join(this.reportsDir,"latest.json");return c.writeFileSync(i,JSON.stringify(e,null,2)),r}loadLatestReport(){let e=l.join(this.reportsDir,"latest.json");return c.existsSync(e)?JSON.parse(c.readFileSync(e,"utf-8")):null}getReportHistory(e=10){return c.readdirSync(this.reportsDir).filter(e=>e.startsWith("report-")&&e.endsWith(".json")).sort().reverse().slice(0,e).map(e=>JSON.parse(c.readFileSync(l.join(this.reportsDir,e),"utf-8")))}}class R{async analyze(e){return console.log("[Engine] Running AI analysis..."),await this.delay(500),{suggestions:["Consider extracting repeated patterns into reusable functions","Add more comprehensive error handling","Document public API functions"],improvements:["Reduce code complexity by breaking down large functions","Add unit tests for critical paths","Improve naming conventions for better clarity"],insights:["Code follows UPLim safety principles","Good use of type system","Memory management patterns are correct"]}}delay(e){return new Promise(t=>setTimeout(t,e))}}class g{constructor(e){this.parser=new h,this.interpreter=new m,this.analyzer=new y,this.securityAnalyzer=new d,this.aiAnalyzer=new R,this.storage=new f(e)}async analyze(e,t={}){console.log(`[Engine] Analyzing: ${e}`);let s=this.findUPLimFiles(e);console.log(`[Engine] Found ${s.length} .upl files`);let r=[];for(let e of s){console.log(`[Engine] Processing: ${e}`);let t=this.analyzeFile(e);r.push(t)}let i=this.generateSummary(r),n={timestamp:new Date().toISOString(),projectPath:e,files:r,summary:i};t.ai&&(console.log("[Engine] Running AI analysis..."),n.aiAnalysis=await this.aiAnalyzer.analyze(JSON.stringify(i)));let a=this.storage.saveReport(n);return console.log(`[Engine] Report saved: ${a}`),n}execute(e){let t=this.parser.parse(e,"exec.upl");if(t.errors.length>0){let e=t.errors[0];throw Error(`Parse Error: ${e.message} at line ${e.line}:${e.column}`)}return this.interpreter.evaluate(t.ast)}analyzeFile(e){let t=c.readFileSync(e,"utf-8"),s=this.parser.parse(t,e),r=this.analyzer.analyze(s,t,e),i=this.securityAnalyzer.analyze(s.ast,t,e);return{path:e,diagnostics:r.diagnostics,security:i.issues,metrics:r.metrics}}findUPLimFiles(e){let t=[],s=e=>{for(let r of c.readdirSync(e,{withFileTypes:!0})){let i=l.join(e,r.name);if(r.isDirectory()&&!r.name.startsWith(".")&&"node_modules"!==r.name)try{s(i)}catch(e){}else r.isFile()&&r.name.endsWith(".upl")&&t.push(i)}};return c.existsSync(e)&&c.statSync(e).isDirectory()?s(e):e.endsWith(".upl")&&c.existsSync(e)&&t.push(e),t}generateSummary(e){let t=0,s=0,r=0,i=0,n=0;return e.forEach(e=>{t+=e.diagnostics.length,s+=e.diagnostics.filter(e=>"error"===e.type).length,r+=e.diagnostics.filter(e=>"warning"===e.type).length,i+=e.metrics.complexity;let a=e.security.filter(e=>"critical"===e.severity).length,o=e.security.filter(e=>"high"===e.severity).length;n+=Math.max(0,100-(25*a+10*o))}),{totalFiles:e.length,totalDiagnostics:t,errorCount:s,warningCount:r,securityScore:e.length>0?Math.floor(n/e.length):100,averageComplexity:e.length>0?i/e.length:0}}}async function T(e){try{let{code:t}=await e.json();if(!t||"string"!=typeof t)return Response.json({error:"Invalid code provided"},{status:400});let s=process.cwd(),r=new g(s).execute(t).join("\n");return Response.json({success:!0,output:r,timestamp:new Date().toISOString()})}catch(e){return console.error("API execution error:",e),Response.json({success:!1,error:e instanceof Error?e.message:"Unknown error",output:""},{status:500})}}let v=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/execute/route",pathname:"/api/execute",filename:"route",bundlePath:"app/api/execute/route"},resolvedPagePath:"/Users/tarashuliichuk/Library/Mobile Documents/com~apple~CloudDocs/My projects/UPLim/UPLim/website/app/api/execute/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:I,staticGenerationAsyncStorage:x,serverHooks:O}=v,A="/api/execute/route";function S(){return(0,o.patchFetch)({serverHooks:O,staticGenerationAsyncStorage:x})}},9303:(e,t,s)=>{e.exports=s(517)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948],()=>s(5795));module.exports=r})();